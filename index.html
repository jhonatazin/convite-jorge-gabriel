<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Convite de Aniversário - Jorge Gabriel</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: url('background.jpg') no-repeat center center fixed;
      background-size: cover;
      margin: 0;
      padding: 0;
      text-align: center;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      overflow: hidden; /* Adicionado para evitar barras de rolagem durante o efeito */
    }
    .container {
      width: 90%;
      max-width: 400px;
      padding: 1.5rem;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 10px;
      position: relative; /* Garante que o conteúdo fique acima dos confetes */
      z-index: 2;
    }
    /* Restante do CSS permanece igual */
  </style>
</head>
<body>
  <div class="container">
    <!-- Todo o conteúdo existente permanece aqui -->
  </div>

  <!-- Script para efeito de confetes -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  
  <script>
    // Função para disparar confetes
    function fireConfetti() {
      const duration = 3 * 1000; // 3 segundos
      const animationEnd = Date.now() + duration;
      const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 1 };
      
      function randomInRange(min, max) {
        return Math.random() * (max - min) + min;
      }
      
      const interval = setInterval(function() {
        const timeLeft = animationEnd - Date.now();
        
        if (timeLeft <= 0) {
          return clearInterval(interval);
        }
        
        const particleCount = 50 * (timeLeft / duration);
        
        // Disparar confetes da parte inferior esquerda
        confetti({
          ...defaults,
          particleCount,
          origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }
        });
        
        // Disparar confetes da parte inferior direita
        confetti({
          ...defaults,
          particleCount,
          origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }
        });
      }, 250);
    }
    
    // Dispara confetes quando a página carrega
    window.addEventListener('load', fireConfetti);
    
    // Restante do código JavaScript permanece igual
    // Contagem regressiva para 28 de julho de 2025
    const countdownDate = new Date("July 28, 2025 00:00:00").getTime();
    
    function updateCountdown() {
      const now = new Date().getTime();
      const distance = countdownDate - now;
      
      // Cálculos para dias, horas, minutos e segundos
      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);
      
      // Atualiza os elementos HTML
      document.getElementById("days").innerText = days.toString().padStart(2, '0');
      document.getElementById("hours").innerText = hours.toString().padStart(2, '0');
      document.getElementById("minutes").innerText = minutes.toString().padStart(2, '0');
      document.getElementById("seconds").innerText = seconds.toString().padStart(2, '0');
    }
    
    // Atualiza a contagem a cada segundo
    setInterval(updateCountdown, 1000);
    updateCountdown(); // Executa imediatamente ao carregar

    // Código original abaixo
    const form = document.getElementById('rsvpForm');
    const nameInput = document.getElementById('name');
    const thanksBox = document.getElementById('thanksBox');
    const copyButton = document.getElementById('copyButton');
    const pixKey = document.getElementById('pixKey');

    // Função para copiar a chave PIX
    copyButton.addEventListener('click', () => {
      const key = pixKey.innerText;
      
      // Usando a API Clipboard moderna
      navigator.clipboard.writeText(key).then(() => {
        // Feedback visual
        copyButton.innerHTML = `
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 13L9 17L19 7" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Copiado!
        `;
        copyButton.classList.add('copied');
        
        // Volta ao estado original após 2 segundos
        setTimeout(() => {
          copyButton.innerHTML = `
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 9H11C9.89543 9 9 9.89543 9 11V20C9 21.1046 9.89543 22 11 22H20C21.1046 22 22 21.1046 22 20V11C22 9.89543 21.1046 9 20 9Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M5 15H4C3.46957 15 2.96086 14.7893 2.58579 14.4142C2.21071 14.0391 2 13.5304 2 13V4C2 3.46957 2.21071 2.96086 2.58579 2.58579C2.96086 2.21071 3.46957 2 4 2H13C13.5304 2 14.0391 2.21071 14.4142 2.58579C14.7893 2.96086 15 3.46957 15 4V5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Copiar
          `;
          copyButton.classList.remove('copied');
        }, 2000);
      }).catch(err => {
        console.error('Erro ao copiar: ', err);
        alert('Não foi possível copiar a chave. Tente manualmente.');
      });
    });

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = nameInput.value.trim();
      if (!name) return alert("Por favor, digite seu nome.");

      try {
        await fetch('https://script.google.com/macros/s/AKfycbyxwS4guOrPGZi2S7J5dcS6zdnVgBESiqklU-u3lkySgftDlzkM7jaYpTtoMuPc6BEe/exec', {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name })
        });
      } catch (error) {
        console.error("Erro ao enviar ao Google Sheets:", error);
      }

      form.classList.add('hidden');
      thanksBox.classList.remove('hidden');
      
      // Dispara confetes novamente ao confirmar presença
      fireConfetti();
    });
  </script>
</body>
</html>